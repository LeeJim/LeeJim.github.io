import{_ as o,o as l,c as n,k as s,a as t,t as e,S as p}from"./chunks/framework.7f03344f.js";const q=JSON.parse('{"title":"使用 HTML 发送邮件","description":"","frontmatter":{"title":"使用 HTML 发送邮件","date":"2016-09-12T12:25:25.000Z","tags":["HTML"],"desc":"HTML发邮件,使用mailto协议","toc":true,"categories":[["前端基础"]]},"headers":[],"relativePath":"fe-base/html-send-email.md","filePath":"fe-base/html-send-email.md","lastUpdated":null}'),c={name:"fe-base/html-send-email.md"},r={id:"frontmatter-title",tabindex:"-1"},D=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-label":'Permalink to "{{ $frontmatter.title }}"'},"​",-1),F=p(`<p>最近项目上的需求是在<code>HTML</code>上直接调用系统的邮件系统发邮件，并添加收件人，标题等信息。看似简单，其实开发过程中也遇到了一些问题，现在来总结一下。</p><h2 id="使用方法" tabindex="-1">使用方法 <a class="header-anchor" href="#使用方法" aria-label="Permalink to &quot;使用方法&quot;">​</a></h2><ul><li>直接用<code>a</code>标签，然后<code>href</code>属性设置协议为<code>mailto</code>即可。然后后面可以跟一些参数</li></ul><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mailto:xxx@qq.com?subject=这是标题&amp;cc=这是抄送&amp;body=这是正文内容</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">发送邮件</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><ul><li>其实和上面的方法差不多，不过是换了提交的方式，就是使用<code>form</code>表单，然后在<code>form</code>的<code>action</code>属性设置协议<code>mailto</code>即可。</li></ul><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">action</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mailto:xxx@qq.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">method</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">这是抄送</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">subject</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">这是标题</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">textarea</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">body</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">cols</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">30</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">rows</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">10</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">这是内容</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">textarea</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">submit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">发送邮件</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><ul><li>如果需要多个收件人则只需要在邮箱地址之间加个逗号，比如：</li></ul><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mailto:xxx@qq.com,yyy@qq.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">发送邮件</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h2 id="存在的问题" tabindex="-1">存在的问题 <a class="header-anchor" href="#存在的问题" aria-label="Permalink to &quot;存在的问题&quot;">​</a></h2><p>很多时候到这里本就应该结束的，但是生活就像心电图，不能一帆风顺，否则你就挂了。</p><p>由于需求的问题，需要自由输入邮件的内容，所有就没使用<code>a</code>标签（因为不想自己拼链接）。于是使用表单提交的方式，于是就出现了一下问题：</p><ol><li><p>在<code>textarea</code>的内容格式提交到邮件系统就乱了（换行什么的丢失了）</p></li><li><p>在<code>ios</code>上出现的问题：点击发送的时候，<code>safari</code>浏览器提示“这是一张不安全的表单”。</p></li></ol><p><strong>分析</strong>：</p><p>出现问题1：是因为表单提交的时候没有编码，导致换行的信息丢失，使用<code>encodeURIComponent</code>编码一下<code>textarea</code>的内容即可。</p><p>出现问题2：则是因为在生产上，我们是使用<code>https</code>协议的，如果表单提交到<code>mailto</code>这个协议，则是安全级别下降（猜测的），于是safari就提示不安全了。针对这个问题，我的解决办法是禁掉<code>form</code>表单的提交，自己使用<code>location.href</code>跳转（与此同时编码一下<code>textarea</code>的内容，则完美解决以上两个问题），这时就类似<code>a</code>标签的方式了。（其实这个时候倒不如使用<code>a</code>标签提交）</p><h2 id="无法解决的问题" tabindex="-1">无法解决的问题 <a class="header-anchor" href="#无法解决的问题" aria-label="Permalink to &quot;无法解决的问题&quot;">​</a></h2><ul><li>在微信上无法唤起邮件系统，因为被微信禁掉了（反而在QQ上正常唤起）</li></ul><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="http://www.5icool.org/a/201003/308.html" target="_blank" rel="noreferrer">HTML的电子邮件链接标签mailto用法详解</a></li></ul>`,19);function y(a,i,d,u,m,h){return l(),n("div",null,[s("h1",r,[t(e(a.$frontmatter.title)+" ",1),D]),F])}const A=o(c,[["render",y]]);export{q as __pageData,A as default};
